<apex:page controller="ProjectSellStatusController" sidebar="fals" showHeader="false">
    <script src="https://code.jquery.com/jquery-1.8.2.min.js" type="text/javascript"/>
    <script src="https://cdn.rawgit.com/vast-engineering/jquery-popup-overlay/1.7.13/jquery.popupoverlay.js" type="text/javascript"/>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#my_popup').popup();
        });
    </script>
    
    <style>
        #my_popup {
            font-size:15px; 
            background-color:white;
        }
        .my_popup_close{
	        float :right;
	    	color: white;
	    	background: none;
	    	background-color:#ab2a2a;
	    	border-radius:50%;
            font-size:15px; 
        }
        table {
        	border-collapse: collapse;
        	border-color:#11919e;
        }
        th {
    		padding: 5px;
    		text-align: left;
    		background-color: #11919e;
    		color: white;
		}
		td{
			padding: 5px;
			background-color: white;
		}
		#selectCity{
			font-size:25px;
    		background-color:#11919e;
    		color:white;
    		vertical-align: top;
    		padding-left: 35%;
    		padding-top:10px;
    		padding-bottom:10px;
    		
		}
    </style>
    <apex:form >
    	<div id="selectCity">
	        <apex:outputText value="Choose City: "/>
	            <apex:selectList value="{!projectCity}" multiselect="false" size="1" style="font-size:15px">
	                <apex:selectOptions Value="{!options}"/>
	                <apex:actionSupport event="onchange" action="{!showProjectList}" rerender="page"/>
	            </apex:selectList>
	    </div>
	        <apex:outputPanel id="page">
	            <table style="margin-left: 35%;margin-top:1%;">
	                <tr>
	                    <td  style="vertical-align: top;">  
	                        <apex:outputPanel rendered="{!if(projectList!=null,true,false) && if(projectListSize!=0,true,false)}">
	                            <table border="1px">
	                                <tr> 
	                                    <th>
	                                        {!projectHead}
	                                    </th>
	                                </tr>
	                                <apex:repeat value="{!projectList}" var="proj"> 
	                                    <tr>
	                                        <td>
	                                            <apex:commandLink action="{!showWingList}" value="{!proj.name}" style="text-decoration: none;" rerender="page,wingTable,apartmentTable">
	                                            <apex:param name="projectId" value="{!proj.Id}"/>
	                                            </apex:commandLink>
	                                        </td>
	                                    </tr>
	                                </apex:repeat> 
	                            </table>
	                        </apex:outputPanel>
	                    </td>  
	                    <td style="vertical-align: top;">
	                        <apex:outputPanel rendered="{!showWing && if(winghead!=null,true,false)}" id="wingTable">
	                            <table border="1px">
	                                <tr>
	                                    <th>
	                                        {!winghead}
	                                    </th>
	                                </tr>
	                                <apex:repeat value="{!wingList}" var="wList"> 
	                                    <tr>
	                                        <td>
	                                            <apex:commandLink action="{!showApartmentList}" value="{!wList.name}" style="text-decoration: none;" rerender="page,apartmentTable">
	                                            <apex:param name="wingId" value="{!wList.Id}"/>
	                                            </apex:commandLink> 
	                                        </td>
	                                    </tr>
	                                </apex:repeat>
	                            </table>
	                        </apex:outputPanel>
	                    </td>
	                    <td  style="vertical-align: top;">
	                        <apex:outputPanel rendered="{!showApartment && if(apartmenthead!=null,true,false)}" id="apartmentTable">     
	                            <table border="1px"> 
	                                <tr> 
	                                    <th> 
	                                        {!apartmenthead} 
	                                    </th>
	                                </tr>
	                                <apex:repeat value="{!apartmentList}" var="aptList" >   
	                                    <tr>
	                                        <td class="my_popup_open"> 
	                                            <apex:commandlink action="{!showFlatDetail}" value="{!aptList.name}" style="text-decoration: none" rerender="apartmentDetail" >
	                                            <apex:param name="flatId" value="{!aptList.Id}"/>
	                                            </apex:commandlink> 
	                                        </td> 
	                                    </tr> 
	                                </apex:repeat>
	                            </table>  
	                        </apex:outputPanel>
	                    </td>
	                </tr>
	            </table>
        	</apex:outputPanel>          
    </apex:form> 
    <div id="my_popup">
    	<button class="my_popup_close">X</button>
        <apex:form >
            <apex:outputPanel id="apartmentDetail">
                <table border="1" style="margin:20px"> 
                	<apex:repeat value="{!flatDetail}" var="details">
	                    <tr>
	                        <th>Door No</th>
	                        <td>{!details.name}</td>
	                    </tr>
                        <tr>
	                        <th>Status</th>
	                        <td>{!details.Status__c}</td> 
                        </tr>
                        <tr>
                        	<th>Owner Name</th>
                        	<td>{!details.Owner_Name__c}</td>
                        </tr>
                        <tr>
                        	<th>Purchase Date</th>
                        	<td>{!details.Purchase_date__c}</td>
                        </tr>
                    </apex:repeat>
                </table>
            </apex:outputPanel>
    	</apex:form>
    </div>
</apex:page>
